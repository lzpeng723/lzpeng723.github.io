(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{585:function(s,e,n){"use strict";n.r(e);var t=n(7),a=Object(t.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"docker介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker介绍"}},[s._v("#")]),s._v(" Docker介绍")]),s._v(" "),n("p",[s._v("Docker是一个装应用的容器")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰的 Docker 入门教程"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("镜像仓库官网"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://www.imooc.com/article/25618",target:"_blank",rel:"noopener noreferrer"}},[s._v("慕课网的一篇文章"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://beltxman.com/2417.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker全流程教学"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"docker-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[s._v("#")]),s._v(" Docker 安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 下载安装\ncurl -s https://get.docker.com | sh\n# 查看版本\ndocker version\n# 启动服务\nservice docker start\n# 查看版本\ndocker version\n# 允许非root用户使用docker\nsudo groupadd docker\nsudo usermod -aG docker your_username\n# 运行一个简单容器\ndocker run ubuntu echo hello docker\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"镜像操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#镜像操作"}},[s._v("#")]),s._v(" 镜像操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 拉取镜像\ndocker pull [OPTIONS] NAME[:TAG]\n# 运行镜像\ndocker run [OPTIONS] IMAGE[:TAG] [COMMAND] [ARG...]\n# 查看所有镜像\ndocker images [OPTIONS] [REPOSITORY[:TAG]]\n# 拉取 helloword 镜像\ndocker pull hello-world\n# 运行 helloword\ndocker run hello-world\n# 拉取 nginx 镜像\ndocker pull nginx\n# 运行nginx\ndocker run nginx\n# 查看run参数\ndocker run --help\n# 后台运行nginx\ndocker run -d nginx\n# 删除镜像\ndocker rmi 镜像id...\n\n# 搜索镜像\ndocker search whalesay\n# 拉取镜像\ndocker pull whalesay\n# 推送镜像\ndocker push myname/whalesay\n# 运行镜像\ndocker run docker/whalesay cowsay Docker很好玩!\n# 复制镜像并打标签\ndocker tag docker/whalesay lzpeng/whalesay\n# 登录\ndocker login\n# 推送镜像\ndocker push lzpeng/whalesay\n# 删除所有镜像\ndocker stop $(docker ps -q)\ndocker rm $(docker ps -a -q)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h3",{attrs:{id:"容器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[s._v("#")]),s._v(" 容器")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 查看运行的容器\ndocker ps\n# 查看所有容器\ndocker ps -a\n# 进入运行的容器\ndocker exec -it 容器id bash\n# 退出容器\nexit\n# 停止运行容器\ndocker stop 容器id\n# 重启运行容器\ndocker restart 容器id\n# 将文件拷贝至容器\ndocker cp index.html 容器id://user/share/nginx/html\n# 提交容器改变创建新的image\ndocker commit -m 'fun' 容器id nginx-fun\n# 删除容器\ndocker rm 容器id...\n# 宿主机文件挂载虚拟机\ndocker run -P -d -v /usr/share/nginx/html nginx\ndocker inspect nginx\n\ndocker run -P -d -v $PWD/html:/usr/share/nginx/html nginx\ndocker create -v $PWD/html:/usr/share/nginx/html -name nginx2 nginx\ndocker run -it --volumes-from nginx2 nginx bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"docker-网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-网络"}},[s._v("#")]),s._v(" Docker 网络")]),s._v(" "),n("p",[s._v("Bridge HOST NONE")]),s._v(" "),n("p",[s._v("Bridge(docker->网桥->主机)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 容器80映射主机8080\ndocker run -d -p 8080:80 nginx\n# 查看端口是否运行\nnetstat -na | grep 8080\n# 映射所有监听端口\ndocker run -d -P nginx\n# 查看端口映射情况\ndocker ps\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h3",{attrs:{id:"制作自己的镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#制作自己的镜像"}},[s._v("#")]),s._v(" 制作自己的镜像")]),s._v(" "),n("p",[s._v("制作自己的镜像")]),s._v(" "),n("p",[s._v("编写 Dockerfile文件")]),s._v(" "),n("div",{staticClass:"language-docker line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-docker"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Docker image for springboot file run")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# VERSION 0.0.1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Author: lzpeng")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础镜像使用java")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" java:8")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 作者")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MAINTAINER")]),s._v(" lzpeng <lzpeng723@gmail.com>")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# VOLUME 指定了临时文件目录为/tmp。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" /tmp")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将jar包添加到容器中并更名为app.jar")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" notebook-0.0.1-SNAPSHOT.jar notebook.jar")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行jar包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" bash -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'touch /notebook.jar'")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8080")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token instruction"}},[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" ["),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"java"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Djava.security.egd=file:/dev/./urandom"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-jar"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/notebook.jar"')]),s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("编写 .dockerignore 文件，如需要")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(".github\n.git\nbuild\nnode_modules\nnpm-debug.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("生成镜像")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker build -t notebook:latest .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("Dockerfile 文件支持命令")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[s._v("命令")]),s._v(" "),n("th",{staticStyle:{"text-align":"center"}},[s._v("用途")])])]),s._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("FROM")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("基础镜像")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("RUN")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("执行命令")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("ADD")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("添加文件(支持远程ftp拷贝文件)")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("COPY")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("拷贝文件")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("CMD")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("执行命令")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("EXPOSE")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("暴露端口")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("WORKDIR")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("指定路径")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("MAINTAINER")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("维护者")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("ENV")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("设定环境变量")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("ENTRYPOINT")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("容器入口")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("USER")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("指定用户")])]),s._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[s._v("VOLUME")]),s._v(" "),n("td",{staticStyle:{"text-align":"center"}},[s._v("挂载点")])])])]),s._v(" "),n("h3",{attrs:{id:"docker-compose"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[s._v("#")]),s._v(" Docker Compose")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/minseo/p/11548177.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("介绍"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://www.cnblogs.com/caidingyu/p/11320021.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装"),n("OutboundLink")],1),s._v(" "),n("a",{attrs:{href:"https://www.runoob.com/docker/docker-compose.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("教程"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("运行此命令以下载Docker Compose的当前稳定版本")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('curl -L "https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("换成国内的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('curl -L "https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("对二进制文件应用可执行权限：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("chmod +x /usr/local/bin/docker-compose\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("安装完成后，可测试 "),n("code",[s._v("docker-compose --version")])]),s._v(" "),n("p",[s._v("常见问题：安装后提示"),n("code",[s._v("docker-compose")]),s._v("找不到")]),s._v(" "),n("p",[s._v("解决方法：编辑配置全局环境变量，再末尾添加以下内容")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim /etc/profile\nexport PATH=/usr/local/bin:$PATH\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("执行"),n("code",[s._v("source /etc/profile")]),s._v("使配置立即生效")]),s._v(" "),n("h3",{attrs:{id:"常用镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用镜像"}},[s._v("#")]),s._v(" 常用镜像")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# Zipkin\ndocker run --name zipkin -d -p 9411:9411 openzipkin/zipkin\n\n# Maven私服\ndocker pull docker.bintray.io/jfrog/artifactory-oss\n\ndocker run --name artifactory-oss-6.18.1 -d -v /Users/qing/JFROG_HOME/artifactory-oss-618:/var/opt/jfrog/artifactory  -p 8083:8081 docker.bintray.io/jfrog/artifactory-oss:6.18.1\n\n#Mysql\ndocker run -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7\n\ndocker run -p 3306:3306 --name mysql -v /opt/mysql-5.7/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"修改镜像源为国内"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改镜像源为国内"}},[s._v("#")]),s._v(" 修改镜像源为国内")]),s._v(" "),n("p",[s._v("daocloud,阿里云,时速云")]),s._v(" "),n("p",[s._v("vim方式修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('sudo vim /etc/docker/daemon.json\n\n{\n    "registry-mirrors": ["https://registry.docker-cn.com","https://docker.mirrors.ustc.edu.cn","http://hub-mirror.c.163.com"]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("tee方式修改")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://registry.docker-cn.com","https://docker.mirrors.ustc.edu.cn","http://hub-mirror.c.163.com"]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("重新加载镜像源")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("systemctl daemon-reload\nsystemctl restart docker\ndocker info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"遇到的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[s._v("#")]),s._v(" 遇到的问题")]),s._v(" "),n("p",[s._v("ubuntu-20.04.1-live-server-amd64 安装docker出错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("root@ubuntu-node:~# curl -s https://get.docker.com|sh\n# Executing docker install script, commit: 3d8fe77c2c46c5b7571f94b42793905e5b3e42e4\n+ sh -c apt-get update -qq >/dev/null\n+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl >/dev/null\nE: Unable to correct problems, you have held broken packages.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("排查是安装apt-transport-https时出错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("root@ubuntu-node:~# apt-get install -y apt-transport-https\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nSome packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\nThe following information may help to resolve the situation:\n\nThe following packages have unmet dependencies:\n apt-transport-https : Depends: libapt-pkg5.0 (>= 1.1~exp15) but it is not going to be installed\nE: Unable to correct problems, you have held broken packages.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("意思是libapt-pkg5.0版本没法安装，经过检查后发现是提前修改了apt源,将apt源设为默认即可")])])}),[],!1,null,null,null);e.default=a.exports}}]);