(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{581:function(t,e,a){t.exports=a.p+"assets/img/image-20200406225334627.102ffc00.png"},680:function(t,e,a){"use strict";a.r(e);var s=a(10),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("a",{attrs:{href:"https://gitee.com/yooome/golang/blob/main/k8s%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B/Kubernetes%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B.md#3-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文链接"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://www.bilibili.com/video/BV1Qv41167ck?p=12",target:"_blank",rel:"noopener noreferrer"}},[t._v("视频教程"),s("OutboundLink")],1)]),t._v(" "),s("h1",{attrs:{id:"_4-资源管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-资源管理"}},[t._v("#")]),t._v(" 4. 资源管理")]),t._v(" "),s("h2",{attrs:{id:"_3-1-资源管理介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-资源管理介绍"}},[t._v("#")]),t._v(" 3.1 资源管理介绍")]),t._v(" "),s("p",[t._v("在kubernetes中，所有的内容都抽象为资源，用户需要通过操作资源来管理kubernetes。")]),t._v(" "),s("blockquote",[s("p",[t._v("kubernetes的本质上就是一个集群系统，用户可以在集群中部署各种服务，所谓的部署服务，其实就是在kubernetes集群中运行一个个的容器，并将指定的程序跑在容器中。")]),t._v(" "),s("p",[t._v("kubernetes的最小管理单元是pod而不是容器，所以只能将容器放在"),s("code",[t._v("Pod")]),t._v("中，而kubernetes一般也不会直接管理Pod，而是通过"),s("code",[t._v("Pod控制器")]),t._v("来管理Pod的。")]),t._v(" "),s("p",[t._v("Pod可以提供服务之后，就要考虑如何访问Pod中服务，kubernetes提供了"),s("code",[t._v("Service")]),t._v("资源实现这个功能。")]),t._v(" "),s("p",[t._v("当然，如果Pod中程序的数据需要持久化，kubernetes还提供了各种"),s("code",[t._v("存储")]),t._v("系统。")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(581),alt:"image-20200406225334627"}})]),t._v(" "),s("blockquote",[s("p",[t._v("学习kubernetes的核心，就是学习如何对集群上的"),s("code",[t._v("Pod、Pod控制器、Service、存储")]),t._v("等各种资源进行操作")])]),t._v(" "),s("h2",{attrs:{id:"_3-2-yaml语言介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-yaml语言介绍"}},[t._v("#")]),t._v(" 3.2 YAML语言介绍")]),t._v(" "),s("p",[t._v("YAML是一个类似 XML、JSON 的标记性语言。它强调以"),s("strong",[t._v("数据")]),t._v('为中心，并不是以标识语言为重点。因而YAML本身的定义比较简单，号称"一种人性化的数据格式语言"。')]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("heima")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("15"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Beijing"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("heima")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heima")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Beijing\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("YAML的语法比较简单，主要有下面几个：")]),t._v(" "),s("ul",[s("li",[t._v("大小写敏感")]),t._v(" "),s("li",[t._v("使用缩进表示层级关系")]),t._v(" "),s("li",[t._v("缩进不允许使用tab，只允许空格( 低版本限制 )")]),t._v(" "),s("li",[t._v("缩进的空格数不重要，只要相同层级的元素左对齐即可")]),t._v(" "),s("li",[t._v("'#'表示注释")])]),t._v(" "),s("p",[t._v("YAML支持以下几种数据类型：")]),t._v(" "),s("ul",[s("li",[t._v("纯量：单个的、不可再分的值")]),t._v(" "),s("li",[t._v("对象：键值对的集合，又称为映射（mapping）/ 哈希（hash） / 字典（dictionary）")]),t._v(" "),s("li",[t._v("数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）")])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 纯量, 就是指的一个简单的值，字符串、布尔值、整数、浮点数、Null、时间、日期")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1 布尔类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" true (或者True)\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2 整型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("234")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3 浮点型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.14")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4 null类型 ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token null important"}},[t._v("~")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用~表示null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5 日期类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2018-02-17")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日期必须使用ISO 8601格式，即yyyy-MM-dd")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 6 时间类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("2018-02-17T15:02:31+08:00")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 7 字符串类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" heima     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 简单写法，直接写值 , 如果字符串中间有特殊字符，必须使用双引号或者单引号包裹 ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("c8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" line1\n    line2     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 字符串过多的情况可以拆成多行，每一行会被转化成一个空格")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 形式一(推荐):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heima")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Beijing\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 形式二(了解):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("heima")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Beijing"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 形式一(推荐):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 顺义\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 昌平\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 形式二(了解):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("address")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("顺义"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("昌平"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("blockquote",[s("p",[t._v("小提示：")]),t._v(" "),s("p",[t._v("1 书写yaml切记"),s("code",[t._v(":")]),t._v(" 后面要加一个空格")]),t._v(" "),s("p",[t._v("2 如果需要将多段yaml配置放在一个文件中，中间要使用"),s("code",[t._v("---")]),t._v("分隔")]),t._v(" "),s("p",[t._v("3 下面是一个yaml转json的网站，可以通过它验证yaml是否书写正确")]),t._v(" "),s("p",[t._v("https://www.json2yaml.com/convert-yaml-to-json")])]),t._v(" "),s("h2",{attrs:{id:"_3-3-资源管理方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-资源管理方式"}},[t._v("#")]),t._v(" 3.3 资源管理方式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("命令式对象管理：直接使用命令去操作kubernetes资源")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl run nginx-pod --image"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx:1.17.1 --port"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("命令式对象配置：通过命令配置和配置文件去操作kubernetes资源")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl create/patch -f nginx-pod.yaml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("声明式对象配置：通过apply命令和配置文件去操作kubernetes资源, apply 等于 创建或更新")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl apply -f nginx-pod.yaml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("操作对象")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("适用环境")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("优点")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("缺点")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("命令式对象管理")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("对象")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("测试")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("简单")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("只能操作活动对象，无法审计、跟踪")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("命令式对象配置")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文件")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("开发")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可以审计、跟踪")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("项目大时，配置文件多，操作麻烦")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("声明式对象配置")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("目录")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("开发")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持目录操作")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("意外情况下难以调试")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-3-1-命令式对象管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-命令式对象管理"}},[t._v("#")]),t._v(" 3.3.1 命令式对象管理")]),t._v(" "),s("p",[s("strong",[t._v("kubectl命令")])]),t._v(" "),s("p",[t._v("kubectl是kubernetes集群的命令行工具，通过它能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。kubectl命令的语法如下：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("comand")]),t._v("：指定要对资源执行的操作，例如create、get、delete")]),t._v(" "),s("p",[s("strong",[t._v("type")]),t._v("：指定资源类型，比如deployment、pod、service")]),t._v(" "),s("p",[s("strong",[t._v("name")]),t._v("：指定资源的名称，名称大小写敏感")]),t._v(" "),s("p",[s("strong",[t._v("flags")]),t._v("：指定额外的可选参数")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有pod")]),t._v("\nkubectl get pod \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看某个pod")]),t._v("\nkubectl get pod pod_name\n\nkubectl get pod pod_name -o wide\nkubectl get pod pod_name -o json\nkubectl get pod pod_name -o yaml\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[s("strong",[t._v("资源类型")])]),t._v(" "),s("p",[t._v("kubernetes中所有的内容都抽象为资源，可以通过下面的命令进行查看:")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl api-resources\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("经常使用的资源有下面这些：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("资源分类")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("资源名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("缩写")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("资源作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("集群级别资源")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("nodes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("集群组成部分")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("namespaces")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ns")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("隔离Pod")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("pod资源")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("pods")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("po")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("装载容器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("pod资源控制器")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("replicationcontrollers")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rc")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("replicasets")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rs")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("deployments")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("deploy")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("daemonsets")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ds")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("jobs")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("cronjobs")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("cj")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("horizontalpodautoscalers")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("hpa")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("statefulsets")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("sts")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("控制pod资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("服务发现资源")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("services")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("svc")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("统一pod对外接口")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ingress")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ing")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("统一pod对外接口")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("存储资源")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("volumeattachments")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("persistentvolumes")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("pv")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("persistentvolumeclaims")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("pvc")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("存储")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("配置资源")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("configmaps")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("cm")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("配置")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("secrets")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("配置")])])])]),t._v(" "),s("p",[s("strong",[t._v("操作")])]),t._v(" "),s("p",[t._v("kubernetes允许对资源进行多种操作，可以通过--help查看详细的操作命令")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl --help\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("经常使用的操作有下面这些：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("命令分类")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("翻译")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("命令作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("基本命令")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("create")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("创建")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("创建一个资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("edit")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("编辑")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("编辑一个资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("get")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("获取一个资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("patch")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("更新")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("更新一个资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("delete")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("删除")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("删除一个资源")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("explain")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("解释")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("展示资源文档")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("运行和调试")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("run")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("运行")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("在集群中运行一个指定的镜像")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("expose")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("暴露")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("暴露资源为Service")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("describe")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("显示资源内部信息")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("logs")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("日志输出容器在 pod 中的日志")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("输出容器在 pod 中的日志")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("attach")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("缠绕进入运行中的容器")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("进入运行中的容器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("exec")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("执行容器中的一个命令")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("执行容器中的一个命令")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("cp")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("复制")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("在Pod内外复制文件")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rollout")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("首次展示")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("管理资源的发布")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("scale")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("规模")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("扩(缩)容Pod的数量")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("autoscale")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("自动调整")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("自动调整Pod的数量")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("高级命令")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("apply")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("rc")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("通过文件对资源进行配置")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("label")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("标签")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("更新资源上的标签")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("其他命令")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("cluster-info")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("集群信息")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("显示集群信息")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("version")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("版本")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("显示当前Server和Client的版本")])])])]),t._v(" "),s("p",[t._v("下面以一个namespace / pod的创建和删除简单演示下命令的使用：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个namespace")]),t._v("\nkubectl create namespace dev\n\nnamespace/dev created\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取namespace")]),t._v("\nkubectl get ns\n\nNAME              STATUS   AGE\ndefault           Active   5h1m\ndev               Active   15s\nkube-node-lease   Active   5h1m\nkube-public       Active   5h1m\nkube-system       Active   5h1m\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在此namespace下创建并运行一个nginx的Pod")]),t._v("\nkubectl run pod --image"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx:latest -n dev\n\npod/pod created\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看新创建的pod")]),t._v("\nkubectl get pod -n dev\n\nNAME  READY   STATUS    RESTARTS   AGE\npod   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          21s\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定的pod")]),t._v("\nkubectl delete pod pod -n dev\n\npod "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pod"')]),t._v(" deleted\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除指定的namespace")]),t._v("\nkubectl delete ns dev\n\nnamespace "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),t._v(" deleted\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("h3",{attrs:{id:"_3-3-2-命令式对象配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-命令式对象配置"}},[t._v("#")]),t._v(" 3.3.2 命令式对象配置")]),t._v(" "),s("p",[t._v("命令式对象配置就是使用命令配合配置文件一起来操作kubernetes资源。")]),t._v(" "),s("p",[t._v("1） 创建一个nginx-pod.yaml，内容如下：")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Namespace\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dev\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pod\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dev\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("containers\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("2）执行create命令，创建资源：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl create -f nginx-pod.yaml\n\nnamespace/dev created\npod/nginx-pod created\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("此时发现创建了两个资源对象，分别是namespace和pod")]),t._v(" "),s("p",[t._v("3）执行get命令，查看资源：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl get -f nginx-pod.yaml\n\nNAME            STATUS   AGE\nnamespace/dev   Active   18s\n\nNAME            READY   STATUS    RESTARTS   AGE\npod/nginx-pod    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          17s\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("这样就显示了两个资源对象的信息")]),t._v(" "),s("p",[t._v("4）执行delete命令，删除资源：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("kubectl delete -f nginx-pod.yaml\n\nnamespace "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),t._v(" deleted\npod "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx-pod"')]),t._v(" deleted\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("此时发现两个资源对象被删除了")]),t._v(" "),s("blockquote",[s("p",[t._v("总结: 命令式对象配置的方式操作资源，可以简单的认为：命令  +  yaml配置文件（里面是命令需要的各种参数）")])]),t._v(" "),s("h3",{attrs:{id:"_3-3-3-声明式对象配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3-声明式对象配置"}},[t._v("#")]),t._v(" 3.3.3 声明式对象配置")]),t._v(" "),s("p",[t._v("声明式对象配置跟命令式对象配置很相似，但是它只有一个命令apply。")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 首先执行一次kubectl apply -f yaml文件，发现创建了资源")]),t._v("\nkubectl apply -f nginx-pod.yaml\n\nnamespace/dev created\npod/nginx-pod created\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 再次执行一次kubectl apply -f yaml文件，发现说资源没有变动")]),t._v("\nkubectl apply -f nginx-pod.yaml\n\nnamespace/dev unchanged\npod/nginx-pod unchanged\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("blockquote",[s("p",[t._v("总结:\n其实声明式对象配置就是使用apply描述一个资源最终的状态（在yaml中定义状态）\n使用apply操作资源：\n如果资源不存在，就创建，相当于 "),s("code",[t._v("kubectl create")]),t._v("\n如果资源已存在，就更新，相当于 "),s("code",[t._v("kubectl patch")])])]),t._v(" "),s("h2",{attrs:{id:"扩展-kubectl可以在node节点上运行吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扩展-kubectl可以在node节点上运行吗"}},[t._v("#")]),t._v(" 扩展：kubectl可以在node节点上运行吗 ?")]),t._v(" "),s("p",[t._v("kubectl的运行是需要进行配置的，它的配置文件是"),s("code",[t._v("$HOME/.kube")]),t._v("，如果想要在node节点运行此命令，需要将master上的.kube文件复制到node节点上，即在master节点上执行下面操作：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v("  -r  "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOME")]),t._v("/.kube   node1: "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOME")]),t._v("/\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("使用推荐: 三种方式应该怎么用 ?")]),t._v(" "),s("blockquote",[s("p",[t._v("创建/更新资源 使用声明式对象配置 kubectl apply -f XXX.yaml")]),t._v(" "),s("p",[t._v("删除资源 使用命令式对象配置 kubectl delete -f XXX.yaml")]),t._v(" "),s("p",[t._v("查询资源 使用命令式对象管理 kubectl get(describe) 资源名称")])])])}),[],!1,null,null,null);e.default=n.exports}}]);