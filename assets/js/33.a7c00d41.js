(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{647:function(e,t,a){"use strict";a.r(t);var r=a(10),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker-machine"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-machine"}},[e._v("#")]),e._v(" Docker Machine")]),e._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[e._v("#")]),e._v(" 简介")]),e._v(" "),a("p",[e._v("Docker Machine 是一种可以让您在虚拟主机上安装 Docker 的工具，并可以使用 docker-machine 命令来管理主机。")]),e._v(" "),a("p",[e._v("Docker Machine 也可以集中管理所有的 docker 主机，比如快速的给 100 台服务器安装上 docker。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/68747470733a2f2f646f63732e646f636b65722e636f6d2f6d616368696e652f696d672f6c6f676f2e706e67.png",alt:"img"}})]),e._v(" "),a("p",[e._v("Docker Machine 管理的虚拟主机可以是机上的，也可以是云供应商，如阿里云，腾讯云，AWS，或 DigitalOcean。")]),e._v(" "),a("p",[e._v("使用 docker-machine 命令，您可以启动，检查，停止和重新启动托管主机，也可以升级 Docker 客户端和守护程序，以及配置 Docker 客户端与您的主机进行通信。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/machine.png",alt:"img"}})]),e._v(" "),a("p",[e._v("最新版本查询 "),a("a",{attrs:{href:"https://api.github.com/repos/docker/machine/releases/latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://api.github.com/repos/docker/machine/releases/latest"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("p",[e._v("安装 Docker Machine 之前你需要先安装 Docker。")]),e._v(" "),a("p",[e._v("Docker Machine 可以在多种平台上安装使用，包括 Linux 、MacOS 以及 windows。")]),e._v(" "),a("h3",{attrs:{id:"linux-安装命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装命令"}},[e._v("#")]),e._v(" Linux 安装命令")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ base=https://github.com/docker/machine/releases/download/v0.16.2 &&\n  curl -L $base/docker-machine-$(uname -s)-$(uname -m) >/tmp/docker-machine &&\n  sudo mv /tmp/docker-machine /usr/local/bin/docker-machine &&\n  chmod +x /usr/local/bin/docker-machine\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"macos-安装命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos-安装命令"}},[e._v("#")]),e._v(" macOS 安装命令")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ base=https://github.com/docker/machine/releases/download/v0.16.2 &&\n  curl -L $base/docker-machine-$(uname -s)-$(uname -m) >/usr/local/bin/docker-machine &&\n  chmod +x /usr/local/bin/docker-machine\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"windows-安装命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows-安装命令"}},[e._v("#")]),e._v(" Windows 安装命令")]),e._v(" "),a("p",[e._v("如果你是 Windows 平台，可以使用 "),a("a",{attrs:{href:"https://git-for-windows.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git BASH"),a("OutboundLink")],1),e._v("，并输入以下命令：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('$ if [[ ! -d "$HOME/bin" ]]; then mkdir -p "$HOME/bin"; fi && \\\ncurl -L https://github.com/docker/machine/releases/download/v0.16.2/docker-machine-Windows-x86_64.exe > "$HOME/bin/docker-machine.exe" && \\\nchmod +x "$HOME/bin/docker-machine.exe"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("将 "),a("code",[e._v("$HOME/bin/docker-machine.exe")]),e._v(" 拷贝到 "),a("code",[e._v("C:\\Program Files\\Docker\\Docker\\resources\\bin")]),e._v(" 中")]),e._v(" "),a("p",[e._v("查看是否安装成功：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine version\ndocker-machine version 0.16.2, build bd45ab13\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h2",{attrs:{id:"配置虚拟机保存位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置虚拟机保存位置"}},[e._v("#")]),e._v(" 配置虚拟机保存位置")]),e._v(" "),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),a("ul",[a("li",[e._v("添加系统环境\n在Windows的系统环境添加"),a("code",[e._v("MACHINE_STORAGE_PATH")]),e._v("，指向虚拟机的位置（例如："),a("code",[e._v("D:\\wsl2\\docker\\vm")]),e._v("）\n复制"),a("code",[e._v("boot2docker.iso")]),e._v("\n复制"),a("code",[e._v("C:\\Users\\<User>\\.docker\\machine\\cache\\boot2docker.iso")]),e._v("到虚拟机的位置同级目录"),a("code",[e._v("cache")]),e._v("上（例如："),a("code",[e._v("D:\\wsl2\\docker\\vm\\cache")]),e._v("），如果不是最新的话需要下载"),a("a",{attrs:{href:"https://api.github.com/repos/boot2docker/boot2docker/releases/latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("最新"),a("OutboundLink")],1),e._v("。")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('setx /m MACHINE_STORAGE_PATH "D:\\wsl2\\docker\\vm\\machines"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[e._v("#")]),e._v(" 使用")]),e._v(" "),a("p",[e._v("本章通过 virtualbox 来介绍 docker-machine 的使用方法。其他云服务商操作与此基本一致。具体可以参考每家服务商的指导文档。")]),e._v(" "),a("h3",{attrs:{id:"_1、列出可用的机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、列出可用的机器"}},[e._v("#")]),e._v(" 1、列出可用的机器")]),e._v(" "),a("p",[e._v("可以看到目前只有这里默认的 default 虚拟机。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine ls\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine1.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine1.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_2、创建机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建机器"}},[e._v("#")]),e._v(" 2、创建机器")]),e._v(" "),a("p",[e._v("创建一台名为 test 的机器。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine create --driver virtualbox test\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[e._v("--driver")]),e._v("：指定用来创建机器的驱动类型，这里是 virtualbox。")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine2.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine2.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_3、查看机器的-ip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、查看机器的-ip"}},[e._v("#")]),e._v(" 3、查看机器的 ip")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine ip test\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine3.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine3.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_4、停止机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、停止机器"}},[e._v("#")]),e._v(" 4、停止机器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine stop test\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine4.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine4.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_5、启动机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、启动机器"}},[e._v("#")]),e._v(" 5、启动机器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine start test\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine5.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine5.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_6、进入机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6、进入机器"}},[e._v("#")]),e._v(" 6、进入机器")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine ssh test\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine6.png",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine6.png",alt:"img"}}),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"docker-machine-命令参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-machine-命令参数说明"}},[e._v("#")]),e._v(" docker-machine 命令参数说明")]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("docker-machine active")]),e._v("：查看当前激活状态的 Docker 主机。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ docker-machine ls\n\nNAME      ACTIVE   DRIVER         STATE     URL\ndev       -        virtualbox     Running   tcp://192.168.99.103:2376\nstaging   *        digitalocean   Running   tcp://203.0.113.81:2376\n\n$ echo $DOCKER_HOST\ntcp://203.0.113.81:2376\n\n$ docker-machine active\nstaging\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("config")]),e._v("：查看当前激活状态 Docker 主机的连接信息。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("create")]),e._v("：创建 Docker 主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("env")]),e._v("：显示连接到某个主机需要的环境变量")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("inspect")]),e._v("： 以 json 格式输出指定Docker的详细信息")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("ip")]),e._v("： 获取指定 Docker 主机的地址")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("kill")]),e._v("： 直接杀死指定的 Docker 主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("ls")]),e._v("： 列出所有的管理主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("provision")]),e._v("： 重新配置指定主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("regenerate-certs")]),e._v("： 为某个主机重新生成 TLS 信息")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("restart")]),e._v("： 重启指定的主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("rm")]),e._v("： 删除某台 Docker 主机，对应的虚拟机也会被删除")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("ssh")]),e._v("： 通过 SSH 连接到主机上，执行命令")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("scp")]),e._v("： 在 Docker 主机之间以及 Docker 主机和本地主机之间通过 scp 远程复制数据")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("mount")]),e._v("： 使用 SSHFS 从计算机装载或卸载目录")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("start")]),e._v("： 启动一个指定的 Docker 主机，如果对象是个虚拟机，该虚拟机将被启动")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("status")]),e._v("： 获取指定 Docker 主机的状态(包括：Running、Paused、Saved、Stopped、Stopping、Starting、Error)等")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("stop")]),e._v("： 停止一个指定的 Docker 主机")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("upgrade")]),e._v("： 将一个指定主机的 Docker 版本更新为最新")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("url")]),e._v("： 获取指定 Docker 主机的监听 URL")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("version")]),e._v("： 显示 Docker Machine 的版本或者主机 Docker 版本")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("help")]),e._v("： 显示帮助信息")])])]),e._v(" "),a("h2",{attrs:{id:"docker-machine-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-machine-常用命令"}},[e._v("#")]),e._v(" docker-machine 常用命令")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[e._v("命令")]),e._v(" "),a("th",{staticStyle:{"text-align":"center"}},[e._v("说明")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine create")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("创建一个 Docker 主机（常用"),a("code",[e._v("-d virtualbox")]),e._v("）")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine ls")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("查看所有的 Docker 主机")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine ssh")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("SSH 到主机上执行命令")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine env")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("显示连接到某个主机需要的环境变量")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine inspect")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("输出主机更多信息")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine kill")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("停止某个主机")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine restart")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("重启某台主机")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine rm")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("删除某台主机")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine scp")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("在主机之间复制文件")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine start")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("启动一个主机")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine status")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("查看主机状态")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("docker-machine stop")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("停止一个主机")])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);