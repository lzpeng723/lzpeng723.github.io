import{_ as i,r as d,o,c as s,b as e,d as t,e as a,a as n}from"./app-Alqy9ioH.js";const c={},l=n('<h1 id="docker-machine" tabindex="-1"><a class="header-anchor" href="#docker-machine" aria-hidden="true">#</a> Docker Machine</h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h2><p>Docker Machine 是一种可以让您在虚拟主机上安装 Docker 的工具，并可以使用 docker-machine 命令来管理主机。</p><p>Docker Machine 也可以集中管理所有的 docker 主机，比如快速的给 100 台服务器安装上 docker。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/11/68747470733a2f2f646f63732e646f636b65722e636f6d2f6d616368696e652f696d672f6c6f676f2e706e67.png" alt="img"></p><p>Docker Machine 管理的虚拟主机可以是机上的，也可以是云供应商，如阿里云，腾讯云，AWS，或 DigitalOcean。</p><p>使用 docker-machine 命令，您可以启动，检查，停止和重新启动托管主机，也可以升级 Docker 客户端和守护程序，以及配置 Docker 客户端与您的主机进行通信。</p><p><img src="https://www.runoob.com/wp-content/uploads/2019/11/machine.png" alt="img"></p>',8),h={href:"https://api.github.com/repos/docker/machine/releases/latest",target:"_blank",rel:"noopener noreferrer"},p=n(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><p>安装 Docker Machine 之前你需要先安装 Docker。</p><p>Docker Machine 可以在多种平台上安装使用，包括 Linux 、MacOS 以及 windows。</p><h3 id="linux-安装命令" tabindex="-1"><a class="header-anchor" href="#linux-安装命令" aria-hidden="true">#</a> Linux 安装命令</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ base=https://github.com/docker/machine/releases/download/v0.16.2 &amp;&amp;
  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/tmp/docker-machine &amp;&amp;
  sudo mv /tmp/docker-machine /usr/local/bin/docker-machine &amp;&amp;
  chmod +x /usr/local/bin/docker-machine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="macos-安装命令" tabindex="-1"><a class="header-anchor" href="#macos-安装命令" aria-hidden="true">#</a> macOS 安装命令</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ base=https://github.com/docker/machine/releases/download/v0.16.2 &amp;&amp;
  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/usr/local/bin/docker-machine &amp;&amp;
  chmod +x /usr/local/bin/docker-machine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="windows-安装命令" tabindex="-1"><a class="header-anchor" href="#windows-安装命令" aria-hidden="true">#</a> Windows 安装命令</h3>`,8),u={href:"https://git-for-windows.github.io/",target:"_blank",rel:"noopener noreferrer"},m=n(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ if [[ ! -d &quot;$HOME/bin&quot; ]]; then mkdir -p &quot;$HOME/bin&quot;; fi &amp;&amp; \\
curl -L https://github.com/docker/machine/releases/download/v0.16.2/docker-machine-Windows-x86_64.exe &gt; &quot;$HOME/bin/docker-machine.exe&quot; &amp;&amp; \\
chmod +x &quot;$HOME/bin/docker-machine.exe&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将 <code>$HOME/bin/docker-machine.exe</code> 拷贝到 <code>C:\\Program Files\\Docker\\Docker\\resources\\bin</code> 中</p><p>查看是否安装成功：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine version
docker-machine version 0.16.2, build bd45ab13
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置虚拟机保存位置" tabindex="-1"><a class="header-anchor" href="#配置虚拟机保存位置" aria-hidden="true">#</a> 配置虚拟机保存位置</h2><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> Windows</h3>`,6),g=e("code",null,"MACHINE_STORAGE_PATH",-1),v=e("code",null,"D:\\wsl2\\docker\\vm",-1),b=e("code",null,"boot2docker.iso",-1),k=e("code",null,"C:\\Users\\<User>\\.docker\\machine\\cache\\boot2docker.iso",-1),x=e("code",null,"cache",-1),_=e("code",null,"D:\\wsl2\\docker\\vm\\cache",-1),w={href:"https://api.github.com/repos/boot2docker/boot2docker/releases/latest",target:"_blank",rel:"noopener noreferrer"},f=n(`<div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>setx /m MACHINE_STORAGE_PATH &quot;D:\\wsl2\\docker\\vm\\machines&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><p>本章通过 virtualbox 来介绍 docker-machine 的使用方法。其他云服务商操作与此基本一致。具体可以参考每家服务商的指导文档。</p><h3 id="_1、列出可用的机器" tabindex="-1"><a class="header-anchor" href="#_1、列出可用的机器" aria-hidden="true">#</a> 1、列出可用的机器</h3><p>可以看到目前只有这里默认的 default 虚拟机。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine ls
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6),D={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine1.png",target:"_blank",rel:"noopener noreferrer"},y=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine1.png",alt:"img"},null,-1),$=n(`<h3 id="_2、创建机器" tabindex="-1"><a class="header-anchor" href="#_2、创建机器" aria-hidden="true">#</a> 2、创建机器</h3><p>创建一台名为 test 的机器。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine create --driver virtualbox test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>--driver</strong>：指定用来创建机器的驱动类型，这里是 virtualbox。</li></ul>`,4),S={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine2.png",target:"_blank",rel:"noopener noreferrer"},E=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine2.png",alt:"img"},null,-1),M=n(`<h3 id="_3、查看机器的-ip" tabindex="-1"><a class="header-anchor" href="#_3、查看机器的-ip" aria-hidden="true">#</a> 3、查看机器的 ip</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine ip test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),H={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine3.png",target:"_blank",rel:"noopener noreferrer"},O=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine3.png",alt:"img"},null,-1),A=n(`<h3 id="_4、停止机器" tabindex="-1"><a class="header-anchor" href="#_4、停止机器" aria-hidden="true">#</a> 4、停止机器</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine stop test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),q={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine4.png",target:"_blank",rel:"noopener noreferrer"},L=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine4.png",alt:"img"},null,-1),R=n(`<h3 id="_5、启动机器" tabindex="-1"><a class="header-anchor" href="#_5、启动机器" aria-hidden="true">#</a> 5、启动机器</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine start test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),T={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine5.png",target:"_blank",rel:"noopener noreferrer"},C=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine5.png",alt:"img"},null,-1),N=n(`<h3 id="_6、进入机器" tabindex="-1"><a class="header-anchor" href="#_6、进入机器" aria-hidden="true">#</a> 6、进入机器</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine ssh test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),I={href:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine6.png",target:"_blank",rel:"noopener noreferrer"},V=e("img",{src:"https://www.runoob.com/wp-content/uploads/2019/11/docker-machine6.png",alt:"img"},null,-1),W=n(`<h3 id="docker-machine-命令参数说明" tabindex="-1"><a class="header-anchor" href="#docker-machine-命令参数说明" aria-hidden="true">#</a> docker-machine 命令参数说明</h3><ul><li><p><strong>docker-machine active</strong>：查看当前激活状态的 Docker 主机。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ docker-machine ls

NAME      ACTIVE   DRIVER         STATE     URL
dev       -        virtualbox     Running   tcp://192.168.99.103:2376
staging   *        digitalocean   Running   tcp://203.0.113.81:2376

$ echo $DOCKER_HOST
tcp://203.0.113.81:2376

$ docker-machine active
staging
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>config</strong>：查看当前激活状态 Docker 主机的连接信息。</p></li><li><p><strong>create</strong>：创建 Docker 主机</p></li><li><p><strong>env</strong>：显示连接到某个主机需要的环境变量</p></li><li><p><strong>inspect</strong>： 以 json 格式输出指定Docker的详细信息</p></li><li><p><strong>ip</strong>： 获取指定 Docker 主机的地址</p></li><li><p><strong>kill</strong>： 直接杀死指定的 Docker 主机</p></li><li><p><strong>ls</strong>： 列出所有的管理主机</p></li><li><p><strong>provision</strong>： 重新配置指定主机</p></li><li><p><strong>regenerate-certs</strong>： 为某个主机重新生成 TLS 信息</p></li><li><p><strong>restart</strong>： 重启指定的主机</p></li><li><p><strong>rm</strong>： 删除某台 Docker 主机，对应的虚拟机也会被删除</p></li><li><p><strong>ssh</strong>： 通过 SSH 连接到主机上，执行命令</p></li><li><p><strong>scp</strong>： 在 Docker 主机之间以及 Docker 主机和本地主机之间通过 scp 远程复制数据</p></li><li><p><strong>mount</strong>： 使用 SSHFS 从计算机装载或卸载目录</p></li><li><p><strong>start</strong>： 启动一个指定的 Docker 主机，如果对象是个虚拟机，该虚拟机将被启动</p></li><li><p><strong>status</strong>： 获取指定 Docker 主机的状态(包括：Running、Paused、Saved、Stopped、Stopping、Starting、Error)等</p></li><li><p><strong>stop</strong>： 停止一个指定的 Docker 主机</p></li><li><p><strong>upgrade</strong>： 将一个指定主机的 Docker 版本更新为最新</p></li><li><p><strong>url</strong>： 获取指定 Docker 主机的监听 URL</p></li><li><p><strong>version</strong>： 显示 Docker Machine 的版本或者主机 Docker 版本</p></li><li><p><strong>help</strong>： 显示帮助信息</p></li></ul><h2 id="docker-machine-常用命令" tabindex="-1"><a class="header-anchor" href="#docker-machine-常用命令" aria-hidden="true">#</a> docker-machine 常用命令</h2><table><thead><tr><th style="text-align:center;">命令</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">docker-machine create</td><td style="text-align:center;">创建一个 Docker 主机（常用<code>-d virtualbox</code>）</td></tr><tr><td style="text-align:center;">docker-machine ls</td><td style="text-align:center;">查看所有的 Docker 主机</td></tr><tr><td style="text-align:center;">docker-machine ssh</td><td style="text-align:center;">SSH 到主机上执行命令</td></tr><tr><td style="text-align:center;">docker-machine env</td><td style="text-align:center;">显示连接到某个主机需要的环境变量</td></tr><tr><td style="text-align:center;">docker-machine inspect</td><td style="text-align:center;">输出主机更多信息</td></tr><tr><td style="text-align:center;">docker-machine kill</td><td style="text-align:center;">停止某个主机</td></tr><tr><td style="text-align:center;">docker-machine restart</td><td style="text-align:center;">重启某台主机</td></tr><tr><td style="text-align:center;">docker-machine rm</td><td style="text-align:center;">删除某台主机</td></tr><tr><td style="text-align:center;">docker-machine scp</td><td style="text-align:center;">在主机之间复制文件</td></tr><tr><td style="text-align:center;">docker-machine start</td><td style="text-align:center;">启动一个主机</td></tr><tr><td style="text-align:center;">docker-machine status</td><td style="text-align:center;">查看主机状态</td></tr><tr><td style="text-align:center;">docker-machine stop</td><td style="text-align:center;">停止一个主机</td></tr></tbody></table>`,4);function B(P,U){const r=d("ExternalLinkIcon");return o(),s("div",null,[l,e("p",null,[t("最新版本查询 "),e("a",h,[t("https://api.github.com/repos/docker/machine/releases/latest"),a(r)])]),p,e("p",null,[t("如果你是 Windows 平台，可以使用 "),e("a",u,[t("Git BASH"),a(r)]),t("，并输入以下命令：")]),m,e("ul",null,[e("li",null,[t("添加系统环境 在Windows的系统环境添加"),g,t("，指向虚拟机的位置（例如："),v,t("） 复制"),b,t(" 复制"),k,t("到虚拟机的位置同级目录"),x,t("上（例如："),_,t("），如果不是最新的话需要下载"),e("a",w,[t("最新"),a(r)]),t("。")])]),f,e("p",null,[e("a",D,[y,a(r)])]),$,e("p",null,[e("a",S,[E,a(r)])]),M,e("p",null,[e("a",H,[O,a(r)])]),A,e("p",null,[e("a",q,[L,a(r)])]),R,e("p",null,[e("a",T,[C,a(r)])]),N,e("p",null,[e("a",I,[V,a(r)])]),W])}const F=i(c,[["render",B],["__file","docker-machine.html.vue"]]);export{F as default};
